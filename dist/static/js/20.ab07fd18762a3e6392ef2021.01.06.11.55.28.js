webpackJsonp([20],{"3HGG":function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=n("Dd8w"),l=n.n(a),t=n("X3JA"),o=n("Cn+M"),s=n("1nuA"),i=n.n(s);var b={data:function(){return{options:t.a,isShow:[{value:1,label:"展示"},{value:2,label:"不展示"}],fileList:[],labelForm:{bannerName:"",bannerHref:"",bannerType:1,bannerState:1,bannerImage:"",bannerSort:1},rules:{bannerName:[{required:!0,message:"请输入banner名称",trigger:"blur"}],bannerHref:[{required:!0,message:"请输入banner跳转地址",trigger:"blur"}],bannerType:[{required:!0,message:"请选择类型",trigger:"blur"}],bannerSort:[{required:!0,message:"排序不能为空",trigger:"blur"}],bannerState:[{required:!0,message:"请选择状态",trigger:"blur"}],bannerImage:[{required:!0,message:"请上传图片",trigger:"blur"}]}}},mounted:function(){var e,r=this,n=this.$route.query.id;Number(n)&&(e={bannerId:n},Object(o.a)({url:"/web/cms/banner/getBanner.json",params:e,method:"get"})).then(function(e){console.log(e),r.labelForm=l()({},r.labelForm,e),r.fileList=[{name:"file",url:e.bannerImage}]})},methods:{submitForm:function(e){var r=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var n;delete r.labelForm.gmtCreate,delete r.labelForm.gmtModified,(n=r.labelForm,Object(o.a)({url:"/web/cms/banner/getBanner.json",data:i.a.stringify(n),method:"post"})).then(function(e){console.log(e),r.$message({type:e.sysRecode,message:e.msg})})})},beforeAvatarUpload:function(e){var r=e.type.includes("image"),n=e.size/1024/1024<2;return r||this.$message.error("上传正确的图片格式!"),n||this.$message.error("上传图片大小不能超过 2MB!"),r&&n},handleRemove:function(e,r){console.log(e,r)},handlePreview:function(e){console.log(e)},handleError:function(e){console.log("错误",e)},handleSuccess:function(e){console.log(e),e.success?(console.log("上传成功",e),this.labelForm.bannerImage=e.fileUrl):this.$message({message:e.msg,type:"error"})}},computed:{myurl:function(){return window.location.origin+"/web/rs/goodsFile/uploadGoodsFiles.json"}}},m={render:function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"addLabel"},[n("el-form",{ref:"labelForm",staticStyle:{width:"50%"},attrs:{"label-width":"150px",model:e.labelForm,rules:e.rules}},[n("el-form-item",{attrs:{label:"banner名称",prop:"bannerName"}},[n("el-input",{model:{value:e.labelForm.bannerName,callback:function(r){e.$set(e.labelForm,"bannerName",r)},expression:"labelForm.bannerName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"跳转链接",prop:"bannerHref"}},[n("el-input",{attrs:{placeholder:"跳转小程序的链接"},model:{value:e.labelForm.bannerHref,callback:function(r){e.$set(e.labelForm,"bannerHref",r)},expression:"labelForm.bannerHref"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"类型",prop:"bannerType"}},[n("el-select",{attrs:{placeholder:"展示页面"},model:{value:e.labelForm.bannerType,callback:function(r){e.$set(e.labelForm,"bannerType",r)},expression:"labelForm.bannerType"}},e._l(e.options,function(e){return n("el-option",{key:e.bannerType,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"排序",prop:"bannerSort"}},[n("el-input",{attrs:{min:1,label:"banner 排序",type:"number"},on:{change:e.handleChange},model:{value:e.labelForm.bannerSort,callback:function(r){e.$set(e.labelForm,"bannerSort",r)},expression:"labelForm.bannerSort"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"状态",prop:"bannerState"}},[n("el-select",{attrs:{placeholder:"是否展示"},model:{value:e.labelForm.bannerState,callback:function(r){e.$set(e.labelForm,"bannerState",r)},expression:"labelForm.bannerState"}},e._l(e.isShow,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("el-form-item",{attrs:{prop:"bannerImage",label:"banner 图片"}},[n("el-upload",{staticClass:"upload-demo",attrs:{name:"file",action:e.myurl,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-error":e.handleError,"on-success":e.handleSuccess,"before-upload":e.beforeAvatarUpload,"file-list":e.fileList,"list-type":"picture",limit:1}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n          只能上传jpg/png/jpeg文件，且不超过2M\n        ")])],1)],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(r){e.submitForm("labelForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var u=n("VU/8")(b,m,!1,function(e){n("bAeq")},null,null);r.default=u.exports},X3JA:function(e,r,n){"use strict";r.a=[{value:1,label:"小程序首页"},{value:2,label:"精选页面"},{value:3,label:"供需页面"},{value:4,label:"采购流程"}]},bAeq:function(e,r,n){var a=n("fQMX");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("8b905236",a,!0)},fQMX:function(e,r,n){(e.exports=n("FZ+f")(!1)).push([e.i,'\n@charset "UTF-8";\n/*显示标签预览*/\n.addLabel {\n  background: #fff;\n  padding: 50px 0 100px 0;\n  border: 1px solid #ededed;\n}\n.themeClass {\n  width: 180px;\n  height: 32px;\n  line-height: 32px;\n  border-radius: 3px;\n  border: 1px solid #3b3b3b;\n  background: #3b3b3b;\n  text-align: center;\n}\n/*整个表单*/\n.addLabel .rtagFont {\n  width: 180px;\n  margin-right: 20px;\n}\n.addLabel .el-color-picker {\n  vertical-align: bottom;\n}\n',""])}});