webpackJsonp([29],{"/uNU":function(e,t,n){var l=n("SsTa");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);n("rjj0")("c52fdf34",l,!0)},SsTa:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.tree-table .el-tree > .el-tree-node {\n  border: 1px solid #ededed;\n  overflow: hidden;\n  margin-bottom: 4px;\n}\n.tree-table .el-tree {\n  background: #f8f8f8;\n}\n.tree-table .el-tree .el-tree-node {\n    background: #fff;\n}\n.tree-table .el-tree .el-tree-node .el-tree-node__content {\n      height: 48px;\n}\n.tree-table .el-tree .el-tree-node .el-tree-node__content .el-tree-node__expand-icon {\n        margin-left: 10px;\n}\n.tree-table .el-tree .el-tree-node .el-button {\n      width: auto;\n}\n.template-tree .tem-tree-header {\n  width: 100%;\n  display: inline-block;\n  margin-top: 20px;\n  list-style: none;\n}\n.template-tree .tem-tree-header li {\n    height: 48px;\n    line-height: 48px;\n    width: auto;\n    display: inline-block;\n}\n.template-tree .tem-tree-header li.table-left-label {\n      float: left;\n}\n.template-tree .tem-tree-header li.table-left-label span {\n        width: 100px;\n        display: block;\n        float: left;\n}\n.template-tree .filter-input {\n  margin-bottom: 20px;\n  width: 190px;\n}\n.template-tree .filter-input input {\n    width: 190px;\n}\n.template-tree .new-filter-input {\n  overflow: hidden;\n  width: 400px;\n  line-height: 35px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.template-tree .new-filter-input span {\n    display: inline-block;\n    float: left;\n    width: 100px;\n}\n.template-tree .new-filter-input .el-input {\n    display: inline-block;\n    float: left;\n    width: 190px !important;\n}\n.template-tree .new-filter-input .el-input .el-input__inner {\n      width: 190px;\n}\n.template-tree .tem-header {\n  margin-bottom: 10px;\n  background: #fff;\n  padding: 20px;\n  border: 1px solid #ededed;\n}\n.template-tree .el-tree-node {\n  position: relative;\n}\n.template-tree .el-tree > .el-tree-node {\n  background: #fff;\n  margin-bottom: 4px;\n}\n.template-tree .el-tree > .el-tree-node > .el-tree-node__content > .template-tree-node {\n    font-weight: bold;\n    font-size: 14px;\n}\n.template-tree .el-tree > .el-tree-node > .el-tree-node__children > .el-tree-node > .el-tree-node__content {\n    font-weight: normal;\n    font-size: 14px;\n}\n.template-tree .el-tree > .el-tree-node > .el-tree-node__children .el-tree-node__children .template-tree-node {\n    font-weight: normal;\n    font-size: 12px;\n}\n.template-tree .el-tree\n> .el-tree-node\n> .el-tree-node__children\n> .el-tree-node\n> .el-tree-node__content\n> .template-tree-node {\n  border-top: 1px solid #f8f8f8;\n}\n.template-tree .el-tree .el-tree-node__children .el-tree-node__children {\n  margin: 20px 0;\n}\n.template-tree .el-tree .el-tree-node__children .el-tree-node__children .el-tree-node__content {\n    background: #fafbfc;\n    padding-left: 0 !important;\n    margin-left: 48px;\n    margin-right: 15px;\n}\n.template-tree .el-tree-node__content {\n  height: auto;\n}\n.template-tree .el-tree-node__content .el-tree-node__expand-icon {\n    z-index: 2;\n}\n.template-tree .el-tree-node__content .template-tree-node {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    font-size: 14px;\n    height: 48px;\n    line-height: 48px;\n}\n.template-tree .el-tree-node__content .template-tree-node .template-tree-label {\n      position: absolute;\n      right: 0;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n      width: 100%;\n      float: right;\n      font-size: 12px;\n      color: #444;\n      font-weight: normal;\n}\n.template-tree .el-tree-node__content .template-tree-node .template-tree-label .first-label {\n        width: 25%;\n        z-index: 0;\n        float: left;\n        height: 48px;\n}\n.template-tree .el-tree-node__content .template-tree-node .template-tree-label .table-content {\n        width: 25%;\n        float: left;\n        overflow: hidden;\n}\n.template-tree .el-tree-node__content .template-tree-node .template-tree-label .table-content:nth-child(1) {\n        padding-left: 30px;\n}\n.template-tree .el-tree-node__content .template-tree-node .template-tree-label .btn-group {\n        min-width: 200px;\n        float: right;\n        text-align: left;\n}\n.template-tree .el-tree-node__content .template-tree-node .template-tree-label .btn-group .el-button {\n          width: auto;\n          padding: 0 15px;\n}\n.template-tree .el-tree-node__content .template-tree-node .template-tree-label .btn-group .tree-btn-hide {\n          visibility: hidden;\n}\n",""])},"pl++":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,a=n("bOdI"),r=n.n(a),i=n("Dd8w"),o=n.n(i),d=n("Cn+M"),s=n("FKcB"),p=n("Fyt/"),c=n("1nuA"),m={components:{"template-input":s.default},props:["temInput","queryPara","temTree","nodeLoad"],data:function(){return{loading:!1,parseTime:p.a,defaultExpandedKeys:[],ruleForm:{},dialogFormVisible:!1,dialogData:{},activeName:"",filterText:"",btnState:null,treeData:[]}},watch:{temTree:function(e){console.log(e,"temTree")},temInput:function(e){console.log(e,"temInput")},filterText:function(e){this.$refs.tree.filter(e)},$route:function(e,t){this.getDataList()}},mounted:function(){this.nodeLoad.lazy||this.getDataList()},methods:(l={filterNode:function(e,t){return!e||(console.log(t),-1!==t[this.temTree.props.label].indexOf(e))},btn:function(e,t){var n=this;if("query"===e.id||"search"===e.id){var l="url"in e&&e.url?e.url:"";this.getDataList(l)}else"add"===e.id&&(e.template.html.forEach(function(e){n.$set(n.ruleForm,e.name,e.value)}),this.dialogData=e,this.dialogFormVisible=!0,this.btnState=1);this.$emit("inputBtnClick",e,t)},handleClick:function(e,t,n,l){console.log(n,e,t,"eeeefff11111223232"),"del"===e.id&&(console.log("删除"),this.delData(n,e,e.url,l)),this.$emit("treeBtnClick",e,n,l)},commt:function(e,t){},selChange:function(e,t){this.$emit("selChange",e,t)},dialogCancel:function(){this.dialogFormVisible=!1},dialogClose:function(){this.$refs.child.setReset(),this.dialogFormVisible=!1},refreshTree:function(e){this.nodeLoad.lazy?e.parent?(e.parent.loaded=!1,e.parent.loading=!1,e.parent.expanded=!1,e.parent.expand(),this.defaultExpandedKeys=[e.key]):this.getDataList():(this.getDataList(),e&&(this.defaultExpandedKeys=[e.key]))},loadNode:function(e,t){var n=this;console.log(e);var l=this.nodeLoad.url?this.nodeLoad.url:"";if(""===l)return this.$message.error("url not defined"),!1;this.loading=!0;var a={};0===e.level?a=o()({},this.queryPara):this.nodeLoad.params.forEach(function(t){a[t.name]=e.data[t.value]}),Object(d.a)({url:l,method:"post",data:c.stringify(a)}).then(function(l){n.loading=!1,0===e.level?Array.isArray(l)?n.treeData=l:n.treeData=l.rows:Array.isArray(l)?(e.data[n.temTree.props.children]=l,t(l)):(e.data[n.temTree.props.children]=l.rows,t(l.rows))})},getDataList:function(e){var t=this,n=this.nodeLoad.url?this.nodeLoad.url:e||"";if(""===n)return this.$message.error("url not defined"),!1;this.loading=!0;var l=o()({},this.queryPara);Object(d.a)({url:n,method:"post",data:c.stringify(l)}).then(function(e){t.loading=!1,Array.isArray(e)?(t.$emit("getData",e),t.treeData=e):(t.$emit("getData",e.rows),t.treeData=e.rows)})},getData:function(e){this.$emit("refreshTree",e)}},r()(l,"dialogCancel",function(){this.dialogFormVisible=!1}),r()(l,"delData",function(e,t,n,l){var a=this,r={};for(var i in t.params)""===t.params[i]?r[i]=e[i]:r[i]=t.params[i];return this.nodeLoad.lazy&&!1===l.expanded?(this.$message.error("请展开当前节点，并确认节点下不存在子节点"),!1):l.childNodes.length>0?(this.$message.error("该节点下存在子节点，不可删除"),!1):void this.$confirm("确认删除该分类？").then(function(t){return Object(d.a)({url:n,method:"post",data:c.stringify(r)}).then(function(t){t.success?(a.$message.success(t.msg),a.remove(l,e)):a.$message.error(t.msg)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}),r()(l,"remove",function(e,t){var n=this,l=e.parent,a=l.data[this.temTree.props.children]||l.data,r=a.findIndex(function(e){return e[n.temTree.props.label]===t[n.temTree.props.label]});a.splice(r,1)}),r()(l,"renderContent",function(e,t){var n=this,l=t.node,a=t.data;t.store;return e("div",{class:"template-tree-node"},[e("span",null,[l.label]),e("div",{class:"template-tree-label"},["treeHeader"in this.temTree&&this.temTree.treeHeader.length>0?this.temTree.treeHeader.map(function(t,l){return"first"===t.type?e("span",{class:"first-label",style:{width:t.width}},[]):"button"!==t.type?e("span",{class:"table-content",style:{width:t.width}},[t.template&&"format"===t.template?n.parseTime(a[t.value]):a[t.value]]):void 0}):"",e("div",{class:"btn-group"},[this.temTree.treeBtn.map(function(t,r){return t.level&&l.level>=t.level?e("el-button",{attrs:{size:"text"},class:"tree-btn-hide"},[t.label]):e("el-button",{attrs:{size:"text"},on:{click:function(){return n.handleClick(t,r,a,l)}}},[t.label])})])])])}),l)},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"template-tree auto"},[e.temInput?n("div",{staticClass:"tem-header"},["filter"in e.temTree?n("div",{staticClass:"filter-input new-filter-input"},[n("span",[e._v("分类搜索：")]),e._v(" "),n("el-input",{attrs:{clearable:"",placeholder:"请输入分类名称"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1):e._e(),e._v(" "),n("ul",{staticClass:"clearfix"},e._l(e.temInput,function(t,l){return n("li",{key:l},["label"in t?n("label",[e._v(e._s(t.label)+"：")]):e._e(),e._v(" "),"type"in t&&"text"===t.type?n("div",[n("el-input",{attrs:{placeholder:"placeholder"in t?t.placeholder:""},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1):e._e(),e._v(" "),"type"in t&&"select"===t.type?n("div",[n("el-select",{attrs:{placeholder:"placeholder"in t?t.placeholder:""},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}},e._l(t.options,function(l){return"options"in t?n("el-option",{key:l.value,attrs:{label:l.label,value:l.value}}):e._e()}))],1):e._e(),e._v(" "),"type"in t&&"date"===t.type?n("div",[n("el-date-picker",{attrs:{"v-model":t.value,placeholder:"placeholder"in t?t.placeholder:"",size:"small",type:"date","value-format":"yyyy-MM-dd"}})],1):e._e(),e._v(" "),"type"in t&&"daterange"===t.type?n("div",[n("el-date-picker",{attrs:{"range-separator":"rangeSeparator"in t&&t.rangeSeparator||"-","start-placeholder":"startPlaceholder"in t&&t.startPlaceholder||"开始时间","end-placeholder":"endPlaceholder"in t&&t.endPlaceholder||"结束时间",size:"small",type:"daterange","value-format":"yyyy-MM-dd"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1):e._e(),e._v(" "),"btnArray"in t?n("div",e._l(t.btnArray,function(t,l){return n("el-button",{key:l,attrs:{type:t.type},on:{click:function(n){e.btn(t,l)}}},[e._v(e._s(t.label))])})):e._e()])}))]):e._e(),e._v(" "),"treeHeader"in e.temTree&&e.temTree.treeHeader.length>0?n("ul",{staticClass:"tem-tree-header"},e._l(e.temTree.treeHeader,function(t,l){return n("li",{key:l,staticClass:"table-left-label",style:{width:t.width?t.width:100/e.temTree.treeHeader.length+"%",float:"button"===t.type?"right":"left","font-size":t.font?t.font:"14px","margin-right":t.mr?t.mr:"0px","margin-left":t.ml?t.ml:"0px","padding-right":t.pr?t.pr:"0px",color:t.color?t.color:"#666","text-align":t.align?t.align:"left"}},[e._v(e._s(t.name))])})):e._e(),e._v(" "),n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree",attrs:{"node-key":e.nodeLoad.id,"default-expanded-keys":e.defaultExpandedKeys,props:e.temTree.props,data:e.treeData,indent:e.temTree.indent||36,"expand-on-click-node":!1,"render-after-expand":!0,load:e.loadNode,lazy:e.nodeLoad.lazy,"filter-node-method":e.filterNode,"render-content":e.renderContent},on:{"node-expand":e.commt}}),e._v(" "),e.dialogData&&e.dialogData.template?n("el-dialog",{attrs:{title:"title"in e.dialogData.template?e.dialogData.template.title:"",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.dialogClose}},[n("template-input",{ref:"child",attrs:{"tem-input":e.dialogData.template.html,rules:e.dialogData.template.rules,"label-width":e.dialogData.template.labelWidth},on:{cancel:e.dialogCancel,getData:e.getData,selChange:e.selChange}})],1):e._e()],1)},staticRenderFns:[]};var f=n("VU/8")(m,u,!1,function(e){n("/uNU")},null,null);t.default=f.exports}});