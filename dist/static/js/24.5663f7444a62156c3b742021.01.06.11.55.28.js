webpackJsonp([24],{HIJe:function(e,t,o){(e.exports=o("FZ+f")(!1)).push([e.i,"\n.demo-form-inline[data-v-e54b902c] .el-input .el-input__inner {\n  width: 135px;\n}\n.table-imgs[data-v-e54b902c] {\n  max-width: 100%;\n  max-height: 40px;\n}\n.add_goods[data-v-e54b902c] {\n  min-height: 80px;\n  border: 1px solid #ebeef5;\n  margin: 15px 0;\n}\n.add_goods .el-dialog .el-dialog__body .el-form-item[data-v-e54b902c] {\n    width: 100%;\n}\n.add_goods .el-dialog .el-dialog__body .el-form-item .el-form-item__content[data-v-e54b902c] {\n      width: 70%;\n}\n.add_goods .el-dialog .el-dialog__body .el-form-item .el-form-item__content .el-select[data-v-e54b902c] {\n        width: 100%;\n}\n.add_goods .el-row[data-v-e54b902c] {\n    margin-bottom: 20px;\n}\n.add_goods .el-row[data-v-e54b902c]:last-child {\n      margin-bottom: 0;\n}\n.add_goods .el-col[data-v-e54b902c] {\n    border-radius: 4px;\n}\n.add_goods .bg-purple-dark[data-v-e54b902c] {\n    background: #99a9bf;\n}\n.add_goods .bg-purple[data-v-e54b902c] {\n    background: #d3dce6;\n}\n.add_goods .bg-purple-light[data-v-e54b902c] {\n    background: #e5e9f2;\n}\n.add_goods .grid-content[data-v-e54b902c] {\n    border-radius: 4px;\n    min-height: 36px;\n}\n.add_goods .row-bg[data-v-e54b902c] {\n    padding: 10px 0;\n    background-color: #f9fafc;\n}\n.add_goods .imgs[data-v-e54b902c] {\n    max-width: 100%;\n    max-height: 200px;\n}\n.el-form[data-v-e54b902c] .reference {\n  right: 30% !important;\n  left: 170px;\n  font-size: 20px;\n  display: inline-block;\n  color: red;\n}\n.hidden[data-v-e54b902c] {\n  width: 88px;\n  height: 1px;\n  z-index: 100;\n  opacity: 0;\n  position: relative;\n  right: 88px;\n  bottom: 10px;\n}\n",""])},NfU1:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("woOf"),a=o.n(n),s=o("mvHQ"),i=o.n(s),l=(o("uXZL"),o("7/x6")),r=o("1nuA"),c={components:{"xlsx-com":l.default},props:["count","getGoodsDataFun","packGoodsList","labelname","btnType","showPrice","saveFun","rowData"],data:function(){return{count:this.count,showContent:!1,labelname:this.labelname,btnType:this.btnType,showPrice:this.showPrice,rowData:this.rowData,subArr:[],ruleForm:{include:""},rangOption:[{value:"=",label:"等于"},{value:"!=",label:"不等于"}],props:{value:"classtreeCode",children:"childList",label:"classtreeName"},treeOptions:[],brandOptions:[],dialogVisible:!1,hide:!1,formInline:{goodsName:"",skuNo:"",classtreeCode:[],brandCode:"",skuBarcode:""},total:null,pageSize:5,pageNo:1,optionsTwo:[],Num:10,goodsSelectList:[],multipleSelectionId:[],multipleSelection:[],objs:""}},mounted:function(){},methods:{customFieldColumn:function(e,t){t.column,t.$index;return e("span",{},[e("span",{},""),e("el-popover",{props:{placement:"top",width:"200",trigger:"hover",content:"不填写按照库存比例同步，填写后按照填写库存数同步"}},[e("i",{slot:"reference",class:"font-normal"},[e("span",{},"渠道库存"),e("span",{class:"icon iconfont icon-wenhao reference"})])])])},customFieldColumn1:function(e,t){t.column,t.$index;return e("span",{},[e("span",{},""),e("el-popover",{props:{placement:"top",width:"200",trigger:"hover",content:"不填写按照比例或者浮动金额同步，填写后按照所填价格同步"}},[e("i",{slot:"reference",class:"font-normal"},[e("span",{},"渠道价格"),e("span",{class:"icon iconfont icon-wenhao reference"})])])])},getData:function(e){this.subArr=[];var t=[];"numset"==this.btnType?e.forEach(function(e,o){t.push({dgnumListTerm:e["*是否等于（等于填=，不等于填!=）"],skuNo:e["*商品编码"],goodsName:e["商品名称"],setPrice:e["*库存"]})}):"priceset"==this.btnType?e.forEach(function(e,o){t.push({dpriceConfTerm:e["*是否等于（等于填=，不等于填!=）"],skuNo:e["*商品编码"],goodsName:e["商品名称"],setPrice:e["*销售价"]})}):"goodset"==this.btnType&&e.forEach(function(e,o){t.push({dgoodsScopelistTerm:e["*是否等于（等于填=，不等于填!=）"],skuNo:e["*商品编码"],goodsName:e["商品名称"]})}),this.subArr=t,this.subArr&&(this.showContent=!0)},release:function(){var e=this;if(0!=this.subArr){var t=[];"priceset"==this.btnType&&(t=this.formatPriceData(this.subArr,"skuNo","goodsName","skuBarcode","skuName","setPrice","dpriceConfTerm")),"goodset"==this.btnType&&(t=this.formatGoodsData(this.subArr,"skuNo","goodsName","skuBarcode","skuName","setPrice","dgoodsScopelistTerm")),"numset"==this.btnType&&(t=this.formatNumData(this.subArr,"skuNo","goodsName","skuBarcode","skuName","setPrice","dgnumListTerm")),console.log(this.subArr,t,"subArr");var o={paramStr:i()(t)};console.log(o,"oJson"),this.saveFun(r.stringify(o)).then(function(t){t.success?(e.$message.success("保存成功"),e.$emit("setRowGoodsData",e.dialogVisible),e.dialogVisible=!1,e.count++):e.$message.error(t.msg)})}else this.$message.error("未导入商品或导入商品为空")},searchCloce:function(){this.pageNo=1,this.objs="goodsName="+(this.formInline.goodsName||"")+"&skuNo="+(this.formInline.skuNo||"")+"&skuBarcode="+(this.formInline.skuBarcode||""),this.getGoodsData()},setSelectionAll:function(e){var t=this;console.log(e),this.optionsTwo.length>0&&(e.length>0?this.optionsTwo.forEach(function(e){-1===t.multipleSelectionId.indexOf(e.skuNo)&&(t.multipleSelectionId.push(e.skuNo),t.multipleSelection.push(e))}):this.optionsTwo.forEach(function(e){t.multipleSelectionId.indexOf(e.skuNo)>-1&&(t.multipleSelectionId.splice(t.multipleSelectionId.indexOf(e.skuNo),1),t.multipleSelection=t.multipleSelection.filter(function(t){return t.skuNo!=e.skuNo}))}))},setSelectionData:function(e,t){this.multipleSelectionId.length>0&&this.multipleSelectionId.indexOf(t.skuNo)>-1?(this.multipleSelectionId.splice(this.multipleSelectionId.indexOf(t.skuNo),1),this.multipleSelection=this.multipleSelection.filter(function(e){return e.skuNo!=t.skuNo})):(this.multipleSelectionId.push(t.skuNo),this.multipleSelection.push(t))},handleClose:function(){this.dialogVisible=!1},handleSizeChange:function(e){this.pageSize=e,this.getGoodsData()},getGoodsData:function(){var e=this,t={rows:this.pageSize,page:this.pageNo};a()(t,this.formInline),this.getGoodsDataFun(t).then(function(t){console.log(t,"wqw"),e.optionsTwo=t.list,e.Num=t.total})},handleCurrentChange:function(e){this.pageNo=e,this.getGoodsData()},addAssociatedGoods:function(){this.formInline={},this.pageNo=1,this.objs="",this.dialogVisible=!0,this.getGoodsData()},beforeClose:function(e){this.dialogVisible=!1,this.multipleSelection=[],e()},closeDia:function(){this.dialogVisible=!1,this.multipleSelection=[]},formatPriceData:function(e,t,o,n,a,s,i){var l=this,r=[];return e.forEach(function(e){r.push({dpriceConfType:t,dpriceConfValue:e[t],dpriceConfValuen:e[o],dpriceCode:l.rowData.dpriceCode,tenantCode:l.rowData.tenantCode,channelCode:l.rowData.channelCode,channelName:l.rowData.channelName,channelSort:l.rowData.channelSort,channelType:l.rowData.channelType,dpriceConfPicurl:e[n],dpriceConfValueno:e[a],dpriceConfPrice:e[s],dpriceConfTerm:l.ruleForm.include||e[i]||"="})}),r},formatNumData:function(e,t,o,n,a,s,i){var l=this,r=[];return e.forEach(function(e){r.push({dgnumListType:t,dgnumListValue:e[t],dgnumListValuen:e[o],dgnumId:l.rowData.dgnumId,dgnumCode:l.rowData.dgnumCode,memberName:l.rowData.memberName,memberCode:l.rowData.memberCode,channelCode:l.rowData.channelCode,channelName:l.rowData.channelName,channelSort:l.rowData.channelSort,channelType:l.rowData.channelType,dgnumListPicurl:e[n],dgnumListValueno:e[a],dgnumListTerm:l.ruleForm.include||e[i]||"=",dgnumListValuename:e[s]})}),r},formatGoodsData:function(e,t,o,n,a,s,i){var l=this,r=[];return e.forEach(function(e){r.push({dgoodsScopelistType:t,dgoodsScopelistValue:e[t],dgoodsScopelistValuen:e[o],dgoodsScopelistPicurl:e[n],dgoodsScopelistDes:e[a],dgoodsScopelistTerm:l.ruleForm.include||e[i]||"=",dgoodsCode:l.rowData.dgoodsCode,channelCode:l.rowData.channelCode,channelName:l.rowData.channelName,channelSort:l.rowData.channelSort,channelType:l.rowData.channelType})}),r},showHide:function(){var e=this;this.multipleSelection.forEach(function(e){e.setPrice=e.setPrice||""});var t=JSON.parse(i()(this.multipleSelection));if(0===t.length)return this.$message.error("至少选择一个商品"),!1;var o=[];"priceset"==this.btnType?o=this.formatPriceData(t,"skuNo","goodsName","skuBarcode","skuName","setPrice","dpriceConfTerm"):"numset"==this.btnType?o=this.formatNumData(t,"skuNo","goodsName","skuBarcode","skuName","setPrice","dgnumListTerm"):"goodset"==this.btnType&&(o=this.formatGoodsData(t,"skuNo","goodsName","skuBarcode","skuName","setPrice","dgoodsScopelistTerm"));var n={paramStr:i()(o)};this.saveFun(r.stringify(n)).then(function(t){t.success?(e.$message.success("保存成功"),e.$emit("setRowGoodsData",e.dialogVisible),e.dialogVisible=!1,e.count++):e.$message.error(t.msg)})}},watch:{count:function(e,t){this.formInline={},this.showContent=!1,this.multipleSelection=[],this.multipleSelectionId=[]}}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-row",{staticStyle:{poition:"absolute"}},[o("el-col",{staticClass:"hidden",attrs:{span:6}},[o("el-button",{attrs:{type:"primary"},on:{click:e.addAssociatedGoods}},[e._v("选择")])],1),e._v(" "),o("el-col",{staticClass:"hidden",attrs:{span:6}},["priceset"==e.btnType?o("el-button",{attrs:{type:"primary"}},[o("a",{attrs:{href:"https://qjstatic.oss-cn-shanghai.aliyuncs.com/excel/disPrice.xlsx"}},[e._v("下载模板")])]):e._e(),e._v(" "),"numset"==e.btnType?o("el-button",{attrs:{type:"primary"}},[o("a",{attrs:{href:"https://qjstatic.oss-cn-shanghai.aliyuncs.com/excel/disNum.xlsx"}},[e._v("下载模板")])]):e._e(),e._v(" "),"goodset"==e.btnType?o("el-button",{attrs:{type:"primary"}},[o("a",{attrs:{href:"https://qjstatic.oss-cn-shanghai.aliyuncs.com/excel/disGoods.xlsx"}},[e._v("下载模板")])]):e._e()],1),e._v(" "),o("el-col",{staticClass:"hidden",attrs:{span:6}},[o("xlsx-com",{ref:"xlsxs",staticClass:"leadCard",attrs:{buttonName:"导入商品",btnType:e.btnType},on:{getData:e.getData}}),e._v(" "),e.showContent?o("span",{staticClass:"showContent"},[e._v("已成功导入文件")]):e._e()],1),e._v(" "),o("el-col",{staticClass:"hidden",attrs:{span:6}},[o("el-button",{attrs:{type:"primary"},on:{click:e.release}},[e._v("发布商品")])],1)],1),e._v(" "),o("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":!0,width:"80%","before-close":e.beforeClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{staticClass:"demo-form-inline form search_bar",attrs:{inline:!0,model:e.formInline}},[o("el-row",[o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"商品名称",prop:"goodsName"}},[o("el-input",{attrs:{placeholder:"请输入商品名称",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchCloce(t)}},model:{value:e.formInline.goodsName,callback:function(t){e.$set(e.formInline,"goodsName",t)},expression:"formInline.goodsName"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"商品编码",prop:"skuNo"}},[o("el-input",{attrs:{placeholder:"请输入商品编码",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchCloce(t)}},model:{value:e.formInline.skuNo,callback:function(t){e.$set(e.formInline,"skuNo",t)},expression:"formInline.skuNo"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"条码",prop:"skuBarcode"}},[o("el-input",{attrs:{placeholder:"请输入商品编码",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchCloce(t)}},model:{value:e.formInline.skuBarcode,callback:function(t){e.$set(e.formInline,"skuBarcode",t)},expression:"formInline.skuBarcode"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:3}},[o("el-form-item",[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.searchCloce}},[e._v("查询")])],1)],1),e._v(" "),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"是否等于"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.include,callback:function(t){e.$set(e.ruleForm,"include",t)},expression:"ruleForm.include"}},e._l(e.rangOption,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1)],1),e._v(" "),o("el-table",{ref:"multipleTable",staticClass:"goods-list",staticStyle:{width:"100%"},attrs:{data:e.optionsTwo,"tooltip-effect":"dark"},on:{"select-all":e.setSelectionAll,select:e.setSelectionData}},[o("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{label:"商品图片",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("img",{staticClass:"table-imgs",attrs:{src:e.row.dataPic}})]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"goodsName",align:"center",label:"商品名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.goodsName))]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"skuNo",align:"center",label:"商品编码",width:"120"}}),e._v(" "),o("el-table-column",{attrs:{prop:"skuBarcode",align:"center",label:"条形码",width:"120"}}),e._v(" "),o("el-table-column",{attrs:{prop:"skuName",align:"center",label:"规格",width:"120"}}),e._v(" "),"priceset"==e.btnType?o("el-table-column",{attrs:{prop:"setPrice",align:"center",width:"170",label:e.labelname,"render-header":e.customFieldColumn1},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{overflow:"hidden"}},[o("el-input",{staticStyle:{float:"left"},attrs:{type:"number"},model:{value:t.row.setPrice,callback:function(o){e.$set(t.row,"setPrice",e._n(o))},expression:"scope.row.setPrice"}})],1)]}}])}):e._e(),e._v(" "),"numset"==e.btnType?o("el-table-column",{attrs:{prop:"setPrice",align:"center",width:"130",label:e.labelname,"render-header":e.customFieldColumn},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{overflow:"hidden"}},[o("el-input",{staticStyle:{float:"left"},attrs:{type:"number"},model:{value:t.row.setPrice,callback:function(o){e.$set(t.row,"setPrice",e._n(o))},expression:"scope.row.setPrice"}})],1)]}}])}):e._e()],1),e._v(" "),o("div",{staticClass:"block"},[o("el-pagination",{attrs:{"current-page":e.pageNo,"page-sizes":[5,10,15,20],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.Num},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNo=t}}})],1),e._v(" "),o("span",{staticClass:"dialog-footer",staticStyle:{position:"relitive",letf:"0",right:"0",margin:"0 auto"},attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeDia}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.showHide}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var u=o("VU/8")(c,d,!1,function(e){o("xfZC")},"data-v-e54b902c",null);t.default=u.exports},xfZC:function(e,t,o){var n=o("HIJe");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);o("rjj0")("006a6225",n,!0)}});